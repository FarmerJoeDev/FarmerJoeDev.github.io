<!DOCTYPE html>
<html>
	<head>
		<title>CxNetwork</title>
	</head>
	<style type="text/css">
		html{
			background-color: black;
			color: white
		}
		button{
			font-size: 1.75vw;
			background-color: #333;
		    color: #f0f0f0;
		    padding: 5px;
		    margin-left:0px;
		    margin-bottom:3px;
		    outline: none;
		    cursor: pointer;
		    border-style: solid;
		    border-left: 1px;
		    border-color: black;

		}
		button:hover{
			background-color: #6e6d6d !important;
		}
		hr{
			border-color:#333;
			border-width: 1.5px;
			border-style: solid;
		}
		.con{
			border-left-color:#333;
			border-right: 0px;
			border-top: 0px;
			border-bottom: 0px;
			border-style: solid;
			padding-left: 4px;
		}
		.addBu{
			margin-bottom: 5px;
			font-size: 1.75vw;
		}
		.live{
			color: #ea1111 !important;
		}
	</style>
	<body>
		<button class="addBu" id="add_stream_button" onClick="toggleList('add_streamer_list');">Add/Remove Stream</button>
		<div id="add_streamer_list" class="con" style="display: none;"></div>
 		<br>
		<!--<button class="addBu" id="add_stream_button_chat" onClick="toggleList('add_streamer_list_chat');">Add/Remove Chat</button>
		<div id="add_streamer_list_chat" class="con" style="display: none;"></div>-->

		<div id="stream_iframes"></div>

		<script type="text/javascript">
			//yt data apikey
			var apiKey = "";

			//[streamerIndex][String id,String displayName,altNames[]],stream playing[],video id[],islive,chat on[]
			streamerData=
			[
			//Ice
			["UCv9Edl_WbtbPeURPtFDo-uA","Ice Poseidon",["ice","iceposeidon","i","goblin"],[false],["0"],false,[false]], 
			//Sam
			["UCKGiTasUqLcZUuUjQiyKotw","Sam Pepper",["sampepper","pepper","sam","s"],[false],["0"],false,[false]], 
			//MexicanAndy
			["UC8EmlqXIlJJpF7dTOmSywBg","Mexican Andy",["Mexican Andy"],[false],["0"],false,[false]],
			//EBZ
			["UCkR8ndH0NypMYtVYARnQ-_g","EBT",["EBZ"],[false],["0"],false,[false]],
			//Bjorn
			["UCD8GawxPXpJnql466KekVXA","Bjorn",["Bjorn"],[false],["0"],false,[false]],
			//AsianAndy
			["UCtd1LPrQtN7Fb-5_xsfJs1Q","Asian Andy",["Asian Andy"],[false],["0"],false,[false]], 
			//Dankquan
			["UCsu6PcWVHcpktJ-0jEouKdQ","Dankquan",["Dankquan"],[false],["0"],false,[false]],
			//HamptonBrandon 
			["UCUHzH3aSxoa9wRudh4V1H-A","Hampton Brandon",["Hampton Brandon"],[false],["0"],false,[false]],
			//Cassandra
			["UCOpjJ_pVN7f4CiayJTvPLQA","Cassandra",["Cassandra"],[false],["0"],false,[false]],
			//Pizza Time
			["UCJNILr75xb9zKpUI0RV7pmQ","Pizza Time",["Pizza Time"],[false],["0"],false,[false]],
			//ScuffedJimCarrey
			["UC0ER0ACJAJC18XC72_S9kgg","Scuffed Jim Carrey",["Scuffed Jim Carrey"],[false],["0"],false,[false]],
			//marie
			["UC16fss-5fnGp2Drqp1iT9pA","Marie",["Marie"],[false],["0"],false,[false]]
			,
			//alpha andy
			["UCaLn62derlYGrYoN79CqEBw","Alpha Andy",["Alpha Andy"],[false],["0"],false,[false]]
			];

			function updateLive(){
				for (var i = 0; i < streamerData.length; i++){
					isLive(i);
				    if(streamerData[i][5]){
				    	document.getElementById("bu_"+i).innerHTML=' <span class="live">'+streamerData[i][1]+'</span>';
				    }else{
				    	document.getElementById("bu_"+i).innerHTML=streamerData[i][1];
				    }
				  }
			}
			function toggleList(i){
					updateLive();
				    var x = document.getElementById(i);
				    if (x.style.display === "none") {
				    	document.getElementById("add_stream_button").style.backgroundColor="#6e6d6d";
				        x.style.display = "grid";
				    } else {
				    	document.getElementById("add_stream_button").style.backgroundColor="#333";
				        x.style.display = "none";
				    }
			}
			function toggleStream(i){
				for (var j = 0; j < streamerData[i][4].length; j++){
				    var iframes = document.getElementById("stream_iframes");
				    if (!streamerData[i][3][j]) {
				    	document.getElementById("bu_"+i).style.backgroundColor="#6e6d6d";
				    	streamerData[i][3][j]=true;
				    	var fr = document.createElement('iframe');
				    	fr.id="fr_"+i;
				    	fr.setAttribute("src","https://www.youtube.com/embed/"+streamerData[i][4][j]+"?autoplay=1");
				    	fr.style.width="854px";
				    	fr.style.height="480px";
				    	fr.style.overflow="hidden";
				    	fr.setAttribute("frameborder","0");
				    	fr.setAttribute("allow","autoplay; encrypted-media");
				    	fr.setAttribute("allowfullscreen","true");
				    	iframes.appendChild(fr);
				    } else {
				    	if(i%2){
				    		document.getElementById("bu_"+i).style.backgroundColor="#333";
				    	}else{
				    		document.getElementById("bu_"+i).style.backgroundColor="#333";
				    	}
				        streamerData[i][3][j]=false;
				        iframes.removeChild(document.getElementById("fr_"+i));
				    }
				}
			}  
			function toggleChat(i){
				for (var j = 0; j < streamerData[i][4].length; j++){
					document.getElementById("bu_c_"+i).style.backgroundColor="#6e6d6d";
				    var iframes = document.getElementById("stream_iframes");
				    if (!streamerData[i][6][j]) {
				    	streamerData[i][6][j]=true;
				    	var fr = document.createElement('iframe');
				    	fr.id="fr_c_"+i;
				    	fr.setAttribute("src","https://gaming.youtube.com/live_chat?v="+streamerData[i][4][j]+"&embed_domain=farmerjoedev.github.io");
				    	fr.style.width="265px";
				    	fr.style.height="500px";
				    	fr.setAttribute("frameborder","0");
				    	fr.setAttribute("allowfullscreen","true");
				    	iframes.appendChild(fr);
				    } else {
				    	if(i%2){
				    		document.getElementById("bu_c_"+i).style.backgroundColor="#333";
				    	}else{
				    		document.getElementById("bu_c_"+i).style.backgroundColor="#333";
				    	}
				        streamerData[i][6][j]=false;
				        iframes.removeChild(document.getElementById("fr_c_"+i));
				    }
				}
			}  
			(function(){
				apiKey = prompt("Enter YouTubeDataAPIKey OR get your own >> https://console.cloud.google.com/apis/library/youtube.googleapis.com/?q=youtube&id=125bab65-cfb6-4f25-9826-4dcc309bc508", "");
				var sl = document.getElementById('add_streamer_list');
				for (var i = 0; i < streamerData.length; i++){
					if(i%2){
						sl.innerHTML+="<div style='display: inline;'><button style='background-color:#333;' onClick='toggleStream("+i+");' id='bu_"+i+"' >"+streamerData[i][1]+"</button><button  style='background-color:#333;' onClick='toggleChat("+i+");' id='bu_c_"+i+"'>üìù</button></div>";
					}else{
						sl.innerHTML+="<div style='display: inline;'><button onClick='toggleStream("+i+");' id='bu_"+i+"' >"+streamerData[i][1]+"</button><button onClick='toggleChat("+i+");' id='bu_c_"+i+"'>üìù</button></div>";
					}
				}
				updateLive();
				window.setInterval(function(){
					updateLive();
				}, 60000); //update every min
			})();
			function isLive(i){
				var xmlhttp = new XMLHttpRequest();
				xmlhttp.onreadystatechange = function() {
				    if (this.readyState == 4 && this.status == 200) {
				        var d = JSON.parse(this.responseText);
				        if(d['pageInfo']['totalResults'] == 0){
				        	streamerData[i][5]=false;
				        }else{
				        	for (var j = 0; j < d["items"].length; j++){
				        		streamerData[i][4][j]=d["items"][j]["id"]["videoId"];	
				        	}
				        	streamerData[i][5]=true;

				        }
				    }
				};
				xmlhttp.open("GET", "https://www.googleapis.com/youtube/v3/search?part=snippet&channelId="+streamerData[i][0]+"&type=video&eventType=live&key="+apiKey, true);
				xmlhttp.send();
			}
		</script>
	</body>
</html>
